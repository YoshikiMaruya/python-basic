## main関数を定義することのメリット

Pythonのスクリプトのエントリーポイントとなるmain関数を定義することにメリットとは、、、

```
def main():
  ....


if __name__ == "__main__":
  main()
```

### メリット
1. 関数の定義を後ろに書ける。
2. 抽象度の高い処理の流れをmain関数で示せる。
3. 処理の変更や差し替えをしやすい。
4. テストが書きやすい。
5. 変数名の意図しない衝突を防げる。


### １．関数の定義を後ろに書ける。
JavaScriptで起こるようなスコープ内の関数名の巻き上げがPythonでは起こらないため、関数は定義した後でしか使うことができません。

```
# 関数は定義よりも前で使うことができないので、このコードを実行するとエラーになる。

func_a()
# => NameErro: name 'func_a' is not defined


def func_a():

 ....

```

main関数を使うことで、main内で使う関数の定義を利用場所の後に書くことができます。

```
# エラーなく`func_a()`が実行できる。

def main():
  func_a()


def func_a():
  ...

if __name__ == "__main__":
  main()
```

### ２．抽象度の高い処理の流れをmain関数で示せる。
１の「関数の定義を後ろに書ける」とも関係しますが、main関数を導入する（＆処理を関数に分ける）ことで抽象度の高いコードと詳細のコードを分けることができます。

大まかな処理の流れをmain関数に、詳細を各関数に分けることで、全体の見通しがよくなります。
例えば次のようなコードであれば、main関数を見るだけでどのような処理が行われているのか大まかに把握することができます。

```
def main():
  # ここを読み込めば、データの読み込み -> 処理 -> 結果の保存 をしていることはわかる。

  data = load_data()
  result = process_data()
  save_data(result)


def load_data():
  ...

def process_data():
  ...

def save_data():
  ...


if __name__ == "__main__":
  main()
```

### ３．処理の変更や差し替えをしやすい
main関数を使用せずコードをべた書きしていると、処理の変更や一時的な差し替えが必要な場合に、多くの行を書き換えなくてはならない。

main関数を定義しておくと、例えば処理の大部分を変更する必要がある場合には、既存のmain関数をmain_old等にリネームして新たなmain関数を定義するといったことをすれば素早く対応できる。

### ４．テストが書きやすい
main関数を使わずにコードをべた書きしていると自動テストを書きづらくなります。

### ５．変数名の意図しない衝突を防げる。
main関数を使わずコードをべた書きすると、多くの変数がグローバル変数のような扱いになってしまいます。
結果として、意図しない変数名の重複によるバグの発生や、用済みのデータが残ることよる無駄なメモリの使用等が起こりえます。

```
# 意図しない変数名の重複例
result = fetch_data()

...

# `culculate()`の結果を表示するための`print()`を追加したが、間違えて`culculate()`の前に`print()`を書いてしまった。
本来`NameError`が起こってすぐに気づくはずだが変数`result`を上でも使っているのでエラーにならず間違いの発見が遅れる。

print(result)
result = calculate()
```


